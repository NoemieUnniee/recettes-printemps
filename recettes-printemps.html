<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mes Recettes ¬∑ Printemps</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,500;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --green: #2D6A4F;
  --green-light: #7C9E7E;
  --green-pale: #EEF5EE;
  --green-mid: #C5DCC6;
  --cream: #FAFAF7;
  --terra: #C4783A;
  --blue: #3D607A;
  --gold: #B8860B;
  --red: #8B3A3A;
  --text: #1A1A1A;
  --muted: #888;
  --white: #fff;
}
body { font-family: 'DM Sans', sans-serif; background: var(--cream); min-height: 100vh; }

/* HEADER */
#header {
  background: linear-gradient(135deg, #2D6A4F 0%, #4A8B6F 50%, #7C9E7E 100%);
  padding: 36px 24px 28px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
#header::before {
  content: '';
  position: absolute;
  top: -40px; right: -40px;
  width: 200px; height: 200px;
  border-radius: 50%;
  background: rgba(255,255,255,0.04);
}
#header::after {
  content: '';
  position: absolute;
  bottom: -60px; left: -30px;
  width: 160px; height: 160px;
  border-radius: 50%;
  background: rgba(255,255,255,0.03);
}
.header-tag {
  font-size: 10px; letter-spacing: 0.22em; text-transform: uppercase;
  color: rgba(255,255,255,0.6); margin-bottom: 10px;
}
.header-title {
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(28px, 5vw, 48px);
  font-weight: 300; font-style: italic;
  color: white; margin-bottom: 4px;
}
.header-sub {
  font-size: 12px; color: rgba(255,255,255,0.65);
  letter-spacing: 0.05em; margin-bottom: 24px;
}
.header-season {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 30px; padding: 6px 18px;
  font-size: 13px; color: rgba(255,255,255,0.9);
}

/* STATS BAR */
#stats {
  background: white;
  border-bottom: 1px solid #EEE;
  padding: 12px 24px;
  display: flex; align-items: center; justify-content: space-between;
  flex-wrap: wrap; gap: 8px;
}
.stat-item {
  font-size: 11px; color: var(--muted);
  display: flex; align-items: center; gap: 5px;
}
.stat-count {
  font-weight: 500; color: var(--green);
  font-size: 13px;
}
#active-filters {
  display: flex; gap: 6px; flex-wrap: wrap;
}
.active-tag {
  background: var(--green); color: white;
  font-size: 10px; padding: 3px 10px; border-radius: 20px;
  letter-spacing: 0.05em; cursor: pointer;
  display: flex; align-items: center; gap: 4px;
}
.active-tag:hover { background: #1f4f3a; }

/* FILTERS */
#filters {
  background: white;
  border-bottom: 1px solid #EEE;
  padding: 16px 20px;
}
.filter-section { margin-bottom: 14px; }
.filter-section:last-child { margin-bottom: 0; }
.filter-label {
  font-size: 10px; letter-spacing: 0.14em; text-transform: uppercase;
  color: var(--muted); margin-bottom: 8px; font-weight: 500;
}
.filter-pills { display: flex; flex-wrap: wrap; gap: 6px; }
.pill {
  border: 1px solid #DDD; background: none; cursor: pointer;
  font-family: 'DM Sans', sans-serif; font-size: 11px;
  letter-spacing: 0.05em; padding: 5px 13px; border-radius: 30px;
  transition: all 0.18s; color: #666; font-weight: 300;
  white-space: nowrap;
}
.pill:hover { border-color: var(--green); color: var(--green); }
.pill.active { font-weight: 500; }

/* phase colors */
.pill[data-phase="menstruelle"].active { background: #8B3A3A18; border-color: #8B3A3A; color: #8B3A3A; }
.pill[data-phase="folliculaire"].active { background: #2D6A4F18; border-color: var(--green); color: var(--green); }
.pill[data-phase="ovulatoire"].active { background: #B8860B18; border-color: var(--gold); color: var(--gold); }
.pill[data-phase="lut√©ale"].active { background: #3D607A18; border-color: var(--blue); color: var(--blue); }
.pill[data-proto]:not([data-phase]):not([data-meal]).active { background: var(--green-pale); border-color: var(--green-light); color: var(--green); }
.pill[data-meal].active { background: #FDF3EB; border-color: var(--terra); color: var(--terra); }

.reset-btn {
  border: none; background: none; cursor: pointer;
  font-family: 'DM Sans', sans-serif; font-size: 11px;
  color: var(--muted); text-decoration: underline;
  padding: 4px 0; margin-top: 4px;
}
.reset-btn:hover { color: var(--text); }

/* GRID */
#grid {
  max-width: 1100px; margin: 0 auto;
  padding: 24px 16px 60px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
}
.empty-state {
  grid-column: 1/-1; text-align: center;
  padding: 60px 20px;
}
.empty-state p:first-child {
  font-family: 'Cormorant Garamond', serif;
  font-size: 22px; font-style: italic; color: var(--muted);
  margin-bottom: 8px;
}
.empty-state p:last-child { font-size: 12px; color: #CCC; }

/* CARD */
.card {
  background: white; border-radius: 3px; overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 1px 6px rgba(0,0,0,0.06);
  border: 1px solid rgba(0,0,0,0.04);
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform:none; } }
.card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,0.09); }
.card.expanded { grid-column: 1/-1; }
.card-stripe { height: 4px; }
.card-inner { padding: 18px 20px; }

.card-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.meal-badge {
  font-size: 9px; padding: 3px 9px; border-radius: 20px;
  letter-spacing: 0.08em; text-transform: uppercase; font-weight: 500;
  color: white;
}
.card-time { font-size: 11px; color: #BBB; }

.card-name {
  font-family: 'Cormorant Garamond', serif;
  font-size: 20px; font-weight: 600; color: var(--text);
  line-height: 1.2; margin-bottom: 8px;
}
.card-ingredients {
  font-size: 12px; color: #777; line-height: 1.65;
  font-weight: 300; margin-bottom: 12px;
}

.card-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px; }
.tag-chip {
  font-size: 10px; padding: 2px 8px; border-radius: 2px;
  color: #999; background: var(--green-pale);
  border: 1px solid var(--green-mid);
  letter-spacing: 0.04em;
}

.card-phases { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 10px; }
.phase-dot {
  font-size: 10px; padding: 2px 8px; border-radius: 20px;
  letter-spacing: 0.04em; font-weight: 400;
}
.phase-menstruelle { background: #8B3A3A15; color: #8B3A3A; border: 1px solid #8B3A3A40; }
.phase-folliculaire { background: #2D6A4F15; color: var(--green); border: 1px solid #2D6A4F40; }
.phase-ovulatoire { background: #B8860B15; color: var(--gold); border: 1px solid #B8860B40; }
.phase-lut√©ale { background: #3D607A15; color: var(--blue); border: 1px solid #3D607A40; }

.card-proto {
  font-size: 11px; color: var(--green);
  font-style: italic; margin-bottom: 4px;
}

.card-tip {
  margin-top: 16px; padding: 14px 16px;
  border-left: 3px solid var(--green-light);
  background: var(--green-pale);
}
.tip-label {
  font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--green); font-weight: 500; margin-bottom: 6px;
}
.tip-text {
  font-family: 'Cormorant Garamond', serif;
  font-size: 16px; color: #333; line-height: 1.6; font-style: italic;
}
.card-hint { font-size: 10px; color: #CCC; margin-top: 10px; }

/* FOOTER */
#footer {
  text-align: center; padding: 28px;
  border-top: 1px solid #EEE; background: white;
}
.verset {
  font-family: 'Cormorant Garamond', serif;
  font-size: 17px; color: var(--green); font-style: italic; margin-bottom: 4px;
}
.ref { font-size: 11px; color: #CCC; letter-spacing: 0.12em; text-transform: uppercase; }
</style>
</head>
<body>

<div id="header">
  <p class="header-tag">Korean-French Fusion ¬∑ Je√ªne Intermittent</p>
  <h1 class="header-title">Mes Recettes Essentielles</h1>
  <p class="header-sub">Produits locaux ¬∑ De saison ¬∑ Famille</p>
  <div class="header-season">üå∏ Printemps ¬∑ Avril ‚Äì Juin</div>
</div>

<div id="stats">
  <div class="stat-item">
    <span class="stat-count" id="count">19</span> recettes affich√©es
  </div>
  <div id="active-filters"></div>
  <button class="reset-btn" onclick="resetAll()">Tout effacer</button>
</div>

<div id="filters">
  <div class="filter-section">
    <p class="filter-label">üåô Phase hormonale</p>
    <div class="filter-pills">
      <button class="pill" data-phase="menstruelle" onclick="toggleFilter('phase','menstruelle',this)">üî¥ Menstruelle</button>
      <button class="pill" data-phase="folliculaire" onclick="toggleFilter('phase','folliculaire',this)">üå± Folliculaire</button>
      <button class="pill" data-phase="ovulatoire" onclick="toggleFilter('phase','ovulatoire',this)">‚ú® Ovulatoire</button>
      <button class="pill" data-phase="lut√©ale" onclick="toggleFilter('phase','lut√©ale',this)">üåô Lut√©ale</button>
    </div>
  </div>
  <div class="filter-section">
    <p class="filter-label">ü•© Prot√©ine principale</p>
    <div class="filter-pills">
      <button class="pill" data-proto="poulet" onclick="toggleFilter('proto','poulet',this)">Poulet</button>
      <button class="pill" data-proto="b≈ìuf" onclick="toggleFilter('proto','b≈ìuf',this)">B≈ìuf</button>
      <button class="pill" data-proto="saumon" onclick="toggleFilter('proto','saumon',this)">Saumon</button>
      <button class="pill" data-proto="crevettes" onclick="toggleFilter('proto','crevettes',this)">Crevettes</button>
      <button class="pill" data-proto="≈ìufs" onclick="toggleFilter('proto','≈ìufs',this)">≈íufs</button>
      <button class="pill" data-proto="lardons" onclick="toggleFilter('proto','lardons',this)">Lardons</button>
      <button class="pill" data-proto="st jacques" onclick="toggleFilter('proto','st jacques',this)">St Jacques</button>
      <button class="pill" data-proto="jambon" onclick="toggleFilter('proto','jambon',this)">Jambon</button>
      <button class="pill" data-proto="chipolatas" onclick="toggleFilter('proto','chipolatas',this)">Chipolatas</button>
    </div>
  </div>
  <div class="filter-section">
    <p class="filter-label">üçΩ Type de repas</p>
    <div class="filter-pills">
      <button class="pill" data-meal="petit-d√©j" onclick="toggleFilter('meal','petit-d√©j',this)">‚òÄÔ∏è Petit d√©j</button>
      <button class="pill" data-meal="d√©jeuner" onclick="toggleFilter('meal','d√©jeuner',this)">üåø D√©jeuner</button>
    </div>
  </div>
  <div class="filter-section">
    <p class="filter-label">ü•¶ Ingr√©dient cl√©</p>
    <div class="filter-pills">
      <button class="pill" data-ing="asperges" onclick="toggleFilter('ing','asperges',this)">Asperges</button>
      <button class="pill" data-ing="avocat" onclick="toggleFilter('ing','avocat',this)">Avocat</button>
      <button class="pill" data-ing="radis" onclick="toggleFilter('ing','radis',this)">Radis</button>
      <button class="pill" data-ing="≈ìuf" onclick="toggleFilter('ing','≈ìuf',this)">≈íuf</button>
      <button class="pill" data-ing="riz" onclick="toggleFilter('ing','riz',this)">Riz</button>
      <button class="pill" data-ing="p√¢tes" onclick="toggleFilter('ing','p√¢tes',this)">P√¢tes</button>
      <button class="pill" data-ing="concombre" onclick="toggleFilter('ing','concombre',this)">Concombre</button>
      <button class="pill" data-ing="√©pinards" onclick="toggleFilter('ing','√©pinards',this)">√âpinards</button>
      <button class="pill" data-ing="chou" onclick="toggleFilter('ing','chou',this)">Chou</button>
      <button class="pill" data-ing="mangue" onclick="toggleFilter('ing','mangue',this)">Mangue</button>
    </div>
  </div>
</div>

<div id="grid"></div>

<div id="footer">
  <p class="verset">¬´ Elle est rev√™tue de force et de dignit√© ¬ª</p>
  <p class="ref">Proverbes 31:25</p>
</div>

<script>
const RECIPES = [
  // PETIT DEJ
  {
    id: 1,
    meal: "petit-d√©j",
    name: "≈íufs au Plat ¬∑ Toast ¬∑ Avocat",
    ingredients: "Pain complet toast√© ¬∑ 2 ≈ìufs au plat ¬∑ avocat √©cras√© citron ¬∑ fleur de sel ¬∑ filet huile olive",
    proto: ["≈ìufs"],
    ing: ["≈ìuf", "avocat"],
    phases: ["menstruelle", "lut√©ale"],
    tags: ["10 min", "R√©confort", "Classique"],
    tip: "√âcraser l'avocat √† la fourchette avec citron + sel ‚Äî pas trop lisse, garder de la texture.",
    time: "5 min",
  },
  {
    id: 2,
    meal: "petit-d√©j",
    name: "≈íufs Brouill√©s ¬∑ Toast ¬∑ Bacon",
    ingredients: "Pain complet toast√© ¬∑ 3 ≈ìufs brouill√©s cr√©meux ¬∑ bacon grill√© croustillant ¬∑ poivre noir",
    proto: ["≈ìufs", "lardons"],
    ing: ["≈ìuf"],
    phases: ["menstruelle", "lut√©ale"],
    tags: ["10 min", "Prot√©in√©", "R√©confort"],
    tip: "≈íufs √† feu tr√®s doux avec beurre, retirer avant d'√™tre totalement pris ‚Äî ils finissent de cuire dans la po√™le.",
    time: "8 min",
  },
  {
    id: 3,
    meal: "petit-d√©j",
    name: "Toast Avocat Saumon Fum√© S√©same",
    ingredients: "Pain complet ¬∑ avocat √©cras√© ¬∑ saumon fum√© ¬∑ graines s√©same noir ¬∑ citron ¬∑ poivre",
    proto: ["saumon"],
    ing: ["avocat"],
    phases: ["folliculaire", "ovulatoire"],
    tags: ["5 min", "Om√©ga-3", "Photog√©nique"],
    tip: "S√©same noir sur le dessus juste avant de servir ‚Äî le contraste visuel est parfait pour le contenu.",
    time: "5 min",
  },
  {
    id: 4,
    meal: "petit-d√©j",
    name: "Toast Fromage Frais Crudit√©s",
    ingredients: "Pain complet ¬∑ fromage frais ¬∑ concombre en rondelles ¬∑ radis ¬∑ oignon nouveau ¬∑ citron ¬∑ herbes",
    proto: ["≈ìufs"],
    ing: ["concombre", "radis"],
    phases: ["folliculaire"],
    tags: ["5 min", "Frais", "L√©ger"],
    tip: "Le fromage frais doit √™tre g√©n√©reux ‚Äî c'est lui qui apporte la sati√©t√©. Ne pas l√©siner.",
    time: "5 min",
  },
  {
    id: 5,
    meal: "petit-d√©j",
    name: "Toast Stracciatella Jambon Sec Roquette",
    ingredients: "Pain complet ¬∑ stracciatella maison (mozza + cr√®me fra√Æche) ¬∑ jambon sec ¬∑ roquette ¬∑ huile olive",
    proto: ["jambon"],
    ing: ["avocat"],
    phases: ["ovulatoire", "lut√©ale"],
    tags: ["8 min", "√âl√©gant", "Calcium"],
    tip: "Stracciatella : effilocher la mozza √† la main + 1 c√†s cr√®me fra√Æche + huile olive + sel. Pr√™te en 2 min.",
    time: "8 min",
  },

  // D√âJEUNERS
  {
    id: 6,
    meal: "d√©jeuner",
    name: "Bibimbap B≈ìuf",
    ingredients: "Mixed grain rice ¬∑ carottes r√¢p√©es ¬∑ concombre r√¢p√© ¬∑ pousses soja ¬∑ chou ¬∑ kimchi ¬∑ ≈ìuf au plat ¬∑ lamelles b≈ìuf sauce soja ¬∑ algues croustillantes",
    proto: ["b≈ìuf", "≈ìufs"],
    ing: ["riz", "≈ìuf", "chou", "concombre"],
    phases: ["menstruelle", "ovulatoire"],
    tags: ["35 min", "Cor√©en", "Complet", "Umami"],
    tip: "Bol chaud frott√© d'huile de s√©same avant de dresser ‚Äî le riz croustille l√©g√®rement en dessous.",
    time: "35 min",
  },
  {
    id: 7,
    meal: "d√©jeuner",
    name: "Salade Poulet Asperges Vinaigrette Balsamique",
    ingredients: "Laitue ou m√¢che ¬∑ poulet grill√© ¬∑ asperges blanchies 3 min ¬∑ radis ¬∑ oignon nouveau ¬∑ ≈ìuf dur ¬∑ graines de courge ¬∑ vinaigrette balsamique huile olive",
    proto: ["poulet", "≈ìufs"],
    ing: ["asperges", "radis", "≈ìuf"],
    phases: ["folliculaire", "ovulatoire"],
    tags: ["20 min", "Printanier", "L√©ger"],
    tip: "Blanchir les asperges 3 min puis choc froid ‚Äî elles restent vertes et croquantes.",
    time: "20 min",
  },
  {
    id: 8,
    meal: "d√©jeuner",
    name: "Steak ou Saumon ¬∑ Pommes de Terre ¬∑ Asperges",
    ingredients: "Steak ou pav√© saumon ¬∑ pommes de terre nouvelles r√¥ties au four ¬∑ asperges po√™l√©es huile olive ¬∑ fleur de sel",
    proto: ["b≈ìuf", "saumon"],
    ing: ["asperges"],
    phases: ["menstruelle", "ovulatoire"],
    tags: ["30 min", "Simple", "Pilote"],
    tip: "Pommes de terre nouvelles : couper en deux, r√¥tir 25 min √† 200¬∞C sans √©plucher ‚Äî la peau est la meilleure partie.",
    time: "30 min",
  },
  {
    id: 9,
    meal: "d√©jeuner",
    name: "Soba Saumon Fum√© ou Crevettes",
    ingredients: "Soba ¬∑ saumon fum√© 150g ou crevettes 150g ¬∑ carottes r√¢p√©es ¬∑ concombre julienne ¬∑ √©pinards frais ¬∑ oignon nouveau ¬∑ cacahu√®tes ¬∑ graines s√©same ¬∑ sauce nem + vinaigre riz + huile s√©same + citron vert",
    proto: ["saumon", "crevettes"],
    ing: ["concombre", "√©pinards"],
    phases: ["folliculaire", "ovulatoire"],
    tags: ["15 min", "Asiatique", "Frais"],
    tip: "Rincer les soba √† l'eau froide apr√®s cuisson ‚Äî elles restent fermes et ne collent pas.",
    time: "15 min",
  },
  {
    id: 10,
    meal: "d√©jeuner",
    name: "Blanquette de Poulet L√©g√®re",
    ingredients: "Poulet ¬∑ carottes r√¥ties ¬∑ champignons grill√©s ¬∑ sauce cr√®me fra√Æche moutarde ¬∑ (p√¢tes compl√®tes en side)",
    proto: ["poulet"],
    ing: ["p√¢tes"],
    phases: ["lut√©ale"],
    tags: ["40 min", "Fran√ßais", "R√©confort", "Chaud"],
    tip: "Sauce l√©g√®re : cr√®me fra√Æche all√©g√©e + moutarde √† l'ancienne + citron ‚Äî ne pas faire bouillir pour ne pas trancher.",
    time: "40 min",
  },
  {
    id: 11,
    meal: "d√©jeuner",
    name: "Salade Poulet Asperges Parmesan",
    ingredients: "Laitue romaine ¬∑ poulet grill√© 150g ¬∑ asperges blanchies ¬∑ 2 ≈ìufs durs ¬∑ copeaux parmesan ¬∑ noix ¬∑ vinaigrette citron huile olive",
    proto: ["poulet", "≈ìufs"],
    ing: ["asperges", "≈ìuf"],
    phases: ["folliculaire", "ovulatoire"],
    tags: ["20 min", "Italien", "Copieux"],
    tip: "Copeaux de parmesan au couteau √©conome ‚Äî bien plus √©l√©gant et g√©n√©reux que du r√¢p√©.",
    time: "20 min",
  },
  {
    id: 12,
    meal: "d√©jeuner",
    name: "Asian Slaw Poulet",
    ingredients: "Chou blanc r√¢p√© fin ¬∑ poulet grill√© froid 150g ¬∑ carottes nouvelles r√¢p√©es ¬∑ concombre ¬∑ avocat ¬∑ cacahu√®tes ¬∑ graines s√©same ¬∑ sauce soja + huile s√©same + citron + pointe miel ¬∑ algues croustillantes",
    proto: ["poulet"],
    ing: ["chou", "concombre", "avocat"],
    phases: ["folliculaire"],
    tags: ["15 min", "Cor√©en-Fran√ßais", "Croquant"],
    tip: "Le chou tient des heures dans l'estomac ‚Äî c'est la recette la plus rassasiante de la liste.",
    time: "15 min",
  },
  {
    id: 13,
    meal: "d√©jeuner",
    name: "Mixed Grain Rice ¬∑ Bacon ¬∑ Asperges ¬∑ ≈íuf",
    ingredients: "Mixed grain rice ¬∑ asperges ou haricots verts enroul√©s bacon croustillant ¬∑ √©pinards tomb√©s graisse bacon ¬∑ ≈ìuf au plat ou mollet ¬∑ oignon nouveau ¬∑ radis crus ¬∑ sauce soja + huile s√©same + citron ¬∑ s√©same noir ¬∑ oignon frit",
    proto: ["lardons", "≈ìufs"],
    ing: ["riz", "asperges", "√©pinards", "radis", "≈ìuf"],
    phases: ["menstruelle", "lut√©ale"],
    tags: ["25 min", "Cor√©en", "Umami", "Complet"],
    tip: "Faire tomber les √©pinards dans la graisse du bacon ‚Äî un niveau de go√ªt incomparable.",
    time: "25 min",
  },
  {
    id: 14,
    meal: "d√©jeuner",
    name: "Salade M√¢che Lardons ≈íuf Poch√©",
    ingredients: "M√¢che ¬∑ lardons grill√©s ¬∑ ≈ìuf poch√© ¬∑ radis ¬∑ noix ¬∑ vinaigrette moutarde balsamique",
    proto: ["lardons", "≈ìufs"],
    ing: ["radis", "≈ìuf"],
    phases: ["menstruelle"],
    tags: ["15 min", "Fran√ßais", "Bistrot"],
    tip: "≈íuf poch√© : eau fr√©missante + vinaigre blanc, cr√©er un tourbillon, 3 min. √âgoutter sur papier absorbant.",
    time: "15 min",
  },
  {
    id: 15,
    meal: "d√©jeuner",
    name: "Bolognaise P√¢tes Compl√®tes",
    ingredients: "P√¢tes compl√®tes ¬∑ b≈ìuf hach√© ¬∑ tomates concass√©es bo√Æte ¬∑ carottes ¬∑ ail ¬∑ herbes ¬∑ parmesan",
    proto: ["b≈ìuf"],
    ing: ["p√¢tes"],
    phases: ["menstruelle", "lut√©ale"],
    tags: ["30 min", "Italien", "Pilote", "Kid-friendly"],
    tip: "Ajouter une poign√©e d'√©pinards dans la sauce 2 min avant la fin ‚Äî ils fondent et boostent le fer sans changer le go√ªt.",
    time: "30 min",
  },
  {
    id: 16,
    meal: "d√©jeuner",
    name: "Steak ¬∑ Patate Douce ¬∑ Asperges",
    ingredients: "Steak ¬∑ patate douce grill√©e four ¬∑ asperges po√™l√©es huile olive ¬∑ fleur de sel",
    proto: ["b≈ìuf"],
    ing: ["asperges"],
    phases: ["menstruelle", "lut√©ale"],
    tags: ["30 min", "Simple", "Magn√©sium"],
    tip: "Patate douce : couper en tranches de 1cm, huile olive + sel, four 200¬∞C 20 min. Caram√©lise parfaitement.",
    time: "30 min",
  },
  {
    id: 17,
    meal: "d√©jeuner",
    name: "Noix de St Jacques ¬∑ M√¢che ¬∑ Mangue",
    ingredients: "8 noix St Jacques po√™l√©es 2 min/c√¥t√© ¬∑ m√¢che ¬∑ mangue en d√©s ¬∑ radis en quartiers ¬∑ √©chalote ¬∑ aneth ¬∑ noix de p√©can ¬∑ vinaigrette moutarde ancienne + balsamique blanc + huile olive + paprika",
    proto: ["st jacques"],
    ing: ["radis", "mangue"],
    phases: ["folliculaire", "ovulatoire"],
    tags: ["20 min", "Fran√ßais", "√âl√©gant", "Zinc"],
    tip: "S√©cher les St Jacques sur papier absorbant avant cuisson ‚Äî c'est ce qui donne la belle cro√ªte dor√©e.",
    time: "20 min",
  },
  {
    id: 18,
    meal: "d√©jeuner",
    name: "Cordon Bleu Maison ¬∑ Asperges",
    ingredients: "Cordon bleu maison (escalope + jambon + fromage + panure sarrasin) ¬∑ asperges ¬∑ (gnocchis en side pour les autres)",
    proto: ["poulet", "jambon"],
    ing: ["asperges"],
    phases: ["lut√©ale"],
    tags: ["35 min", "Fran√ßais", "R√©confort", "Kid-friendly"],
    tip: "Panure farine sarrasin + ≈ìuf + chapelure panko ‚Äî naturellement plus l√©g√®re et sans gluten.",
    time: "35 min",
  },
  {
    id: 19,
    meal: "d√©jeuner",
    name: "Couscous Chipolatas Merguez",
    ingredients: "Semoule compl√®te ¬∑ chipolatas + merguez ¬∑ carottes ¬∑ navets ¬∑ tomates concass√©es bo√Æte ¬∑ raisins secs ¬∑ pois chiches ¬∑ bouillon l√©gumes ¬∑ ras el hanout",
    proto: ["chipolatas"],
    ing: ["riz"],
    phases: ["lut√©ale"],
    tags: ["40 min", "Maghreb", "R√©confort", "Kid-friendly"],
    tip: "Manger prot√©ines et l√©gumes en premier, semoule en dernier ‚Äî r√©duit significativement le pic glyc√©mique.",
    time: "40 min",
  },
];

const PHASE_LABELS = {
  menstruelle: "üî¥ Menstruelle",
  folliculaire: "üå± Folliculaire",
  ovulatoire: "‚ú® Ovulatoire",
  "lut√©ale": "üåô Lut√©ale",
};

const MEAL_COLORS = {
  "petit-d√©j": "#C4783A",
  "d√©jeuner": "#2D6A4F",
};

let filters = { phase: null, proto: null, meal: null, ing: null };
let expanded = null;

function toggleFilter(type, value, btn) {
  if (filters[type] === value) {
    filters[type] = null;
    btn.classList.remove("active");
  } else {
    // deactivate others in same group
    document.querySelectorAll(`.pill[data-${type}]`).forEach(b => b.classList.remove("active"));
    filters[type] = value;
    btn.classList.add("active");
  }
  expanded = null;
  render();
}

function resetAll() {
  filters = { phase: null, proto: null, meal: null, ing: null };
  document.querySelectorAll('.pill').forEach(b => b.classList.remove("active"));
  expanded = null;
  render();
}

function getFiltered() {
  return RECIPES.filter(r => {
    if (filters.phase && !r.phases.includes(filters.phase)) return false;
    if (filters.proto && !r.proto.includes(filters.proto)) return false;
    if (filters.meal && r.meal !== filters.meal) return false;
    if (filters.ing && !r.ing.includes(filters.ing)) return false;
    return true;
  });
}

function render() {
  const filtered = getFiltered();

  // Count
  document.getElementById("count").textContent = filtered.length;

  // Active filter tags
  const af = document.getElementById("active-filters");
  af.innerHTML = "";
  const labels = {
    phase: filters.phase ? PHASE_LABELS[filters.phase] : null,
    proto: filters.proto,
    meal: filters.meal,
    ing: filters.ing,
  };
  Object.entries(labels).forEach(([type, val]) => {
    if (!val) return;
    const el = document.createElement("span");
    el.className = "active-tag";
    el.innerHTML = `${val} ‚úï`;
    el.onclick = () => {
      filters[type] = null;
      document.querySelectorAll(`.pill[data-${type}]`).forEach(b => b.classList.remove("active"));
      render();
    };
    af.appendChild(el);
  });

  // Grid
  const grid = document.getElementById("grid");
  if (filtered.length === 0) {
    grid.innerHTML = `<div class="empty-state"><p>Aucune recette trouv√©e</p><p>Essaie une autre combinaison de filtres</p></div>`;
    return;
  }

  grid.innerHTML = filtered.map(r => {
    const isOpen = expanded === r.id;
    const mealColor = MEAL_COLORS[r.meal];
    const mealLabel = r.meal === "petit-d√©j" ? "Petit d√©j" : "D√©jeuner";
    return `
      <div class="card${isOpen ? " expanded" : ""}" onclick="toggleCard(${r.id})">
        <div class="card-stripe" style="background: linear-gradient(90deg, ${mealColor}, #7C9E7E)"></div>
        <div class="card-inner">
          <div class="card-top">
            <span class="meal-badge" style="background:${mealColor}">${mealLabel}</span>
            <span class="card-time">‚è± ${r.time}</span>
          </div>
          <h3 class="card-name">${r.name}</h3>
          <p class="card-ingredients">${r.ingredients}</p>
          <div class="card-tags">${r.tags.map(t => `<span class="tag-chip">${t}</span>`).join("")}</div>
          <div class="card-phases">${r.phases.map(p => `<span class="phase-dot phase-${p}">${PHASE_LABELS[p]}</span>`).join("")}</div>
          <p class="card-proto">ü•© ${r.proto.join(" ¬∑ ")}</p>
          ${isOpen ? `
            <div class="card-tip">
              <p class="tip-label">‚ú® Astuce</p>
              <p class="tip-text">${r.tip}</p>
            </div>
          ` : ""}
          <p class="card-hint">${isOpen ? "‚Üë Replier" : "‚Üí Voir l'astuce"}</p>
        </div>
      </div>
    `;
  }).join("");
}

function toggleCard(id) {
  expanded = expanded === id ? null : id;
  render();
}

render();
</script>
</body>
</html>
